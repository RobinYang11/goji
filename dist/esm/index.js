import{jsxs as e,jsx as t}from"react/jsx-runtime";import l,{useRef as n,useState as o,useMemo as i,useEffect as r,useContext as s}from"react";import{motion as a}from"framer-motion";import{createPortal as d}from"react-dom";function u(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===l&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var c={upload:"upload-module_upload__sdJ3u",fileList:"upload-module_fileList__r72T1",fileItem:"upload-module_fileItem__-GDPm",deleteItem:"upload-module_deleteItem__S1XS3"};function m(l){const{beforeUpload:r,children:s,uploadUrl:a,onComplete:d,customList:u,urlFilter:m,valueFilter:p}=l,f=n();let[h,_]=o([]);const b=e=>{const t=[];for(let l=0;l<e.length;l++)t.push(new Promise(((t,n)=>{const o=new XMLHttpRequest,i=new FormData;i.append("file",e[l]),o.open("POST",a),o.send(i),o.onerror=e=>{n(e)},o.onload=()=>{let n;try{n=JSON.parse(o.response)}catch(e){n=o.response}const i={lastModified:(r=e[l]).lastModified,name:r.name,size:r.size,type:r.type,originFileObj:r};var r;const s=Object.assign({response:n},i);t(s)}})));Promise.all(t).then((e=>{h=h.concat(e),_([...h]),null==d||d(h)}))},v=i((()=>u?u(h):h.map(((l,n)=>(console.log("Abc",l),e("li",Object.assign({className:c.fileItem},{children:[l.type,t("img",{src:m(l.response),style:{width:"100px"}}),t("span",Object.assign({onClick:()=>{null==h||h.splice(n,1),_([...h])},className:c.deleteItem},{children:"delete"}))]})))))),[h]);return e("span",Object.assign({className:c.upload},{children:[t("input",{multiple:!0,onChange:e=>{var t;e.target.files&&(t=e.target.files,r?null==r||r(t).then((e=>{b(t)})).catch((e=>{console.log(e)})):b(t))},ref:f,type:"file"}),e("ul",Object.assign({className:c.fileList},{children:[t("li",{children:t("span",Object.assign({onClick:()=>{f.current.click()}},{children:s}))}),v]}))]}))}u(".upload-module_upload__sdJ3u{cursor:pointer;display:inline-block;position:relative}.upload-module_upload__sdJ3u input{opacity:0;position:absolute;width:200px}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1{margin:0;padding-left:0}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1 li{list-style:none}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1 .upload-module_fileItem__-GDPm{position:relative}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1 .upload-module_fileItem__-GDPm .upload-module_deleteItem__S1XS3{position:absolute}");var p={modal:"modal-module_modal__6lMO2",mask:"modal-module_mask__4ikYm",modalContent:"modal-module_modalContent__h8nfh"};function f(l){const{width:n=800,children:o,dontDestroyOnClose:i=!1,visible:r,onClose:s,style:d={},motionConfig:u={initial:{opacity:.1,y:0,scale:.2},animate:{opacity:1,y:50,scale:1}}}=l,c={};if(i)c.display=r?"block":"none";else if(!r)return null;return e("div",Object.assign({style:Object.assign({},c),className:p.modal},{children:[t("div",{onClick:()=>{null==s||s()},className:p.mask}),t(a.div,Object.assign({},u,{style:Object.assign({width:`${n}px`},d),className:p.modalContent},{children:o}))]}))}u(".modal-module_modal__6lMO2{bottom:0;left:0;position:fixed;right:0;top:0;width:100%;z-index:1000}.modal-module_modal__6lMO2 .modal-module_mask__4ikYm{background-color:rgba(92,93,93,.385);bottom:0;left:0;position:fixed;right:0;top:0;z-index:10000}.modal-module_modal__6lMO2 .modal-module_modalContent__h8nfh{background-color:#fff;left:0;margin:0 auto;min-height:200px;position:absolute;right:0;top:0;z-index:10001}");var h={tab:"tab-module_tab__OCzxZ",title:"tab-module_title__7nE0l",tabContent:"tab-module_tabContent__zUPX9"};function _(l){const{items:i,className:s,defaultActiveKey:u,motionConfig:c,extension:m,extSelector:p,tabContentVisible:f=!0,onTabChange:_,hiddenStyle:b={display:"none"}}=l,[v,g]=o(0),[y,O]=o(),j=n(null);return r((()=>{var e;if(!j)return;if(!m)return;if(!p)throw new Error("'extSelector' not provide!");const t=null===(e=j.current)||void 0===e?void 0:e.querySelector(p);t&&O(t)}),[j.current]),e("div",Object.assign({ref:j,className:`${h.tab} ${s}`},{children:[y?d(m,y):null,t(a.ul,Object.assign({"aria-label":"tab",className:h.title},{children:null==i?void 0:i.map(((e,l)=>t(a.li,Object.assign({"aria-label":"tab-title",onClick:()=>{g(l),null==_||_(e)}},{children:e.title}),e.key)))})),f?t(a.div,Object.assign({"aria-label":"tab-content"},c,{className:h.tabContent},{children:null==i?void 0:i[v].children})):null]}))}u(".tab-module_tab__OCzxZ .tab-module_title__7nE0l li{cursor:pointer;list-style:none;padding:10px}.tab-module_tab__OCzxZ .tab-module_tabContent__zUPX9{color:inherit}");var b={flex:"flex-module_flex__cvL3B"};function v(e){const{children:l,style:n,className:o,alignItems:i,justify:r}=e;return t("div",Object.assign({},e,{style:Object.assign({alignItems:i,justifyContent:r},n),className:`${b.flex} ${o}`},{children:l}))}function g({children:e,className:l,style:n,flex:o}){return t("div",Object.assign({className:l,style:Object.assign(Object.assign({flex:`0 0 ${o}`},n),{boxSizing:"border-box"})},{children:e}))}u(".flex-module_flex__cvL3B{display:flex;flex-wrap:wrap}");var y={table:"table-module_table__7msNC"};function O(l){const{data:n,cols:o,className:r}=l,s=i((()=>null==o?void 0:o.map((e=>t("td",{children:null==e?void 0:e.title},null==e?void 0:e.key)))),[o]);return e("table",Object.assign({className:`${r} ${y.table}`},{children:[t("thead",{children:t("tr",{children:s})}),t("tbody",{children:null==n?void 0:n.map((e=>t("tr",{children:null==o?void 0:o.map((l=>l.render?t("td",{children:l.render(e)},l.key):t("td",{children:e[l.key]},l.key)))},e.id)))})]}))}u(".table-module_table__7msNC{border-collapse:collapse;font-size:16px;text-align:center}.table-module_table__7msNC thead{background-color:#f7f7f7;height:40px;line-height:40px}.table-module_table__7msNC tbody{background-color:#fcfcfc}.table-module_table__7msNC tbody td{height:40px;line-height:40px;padding:0 12px}");var j={button:"button-module_button__iK0YS"};function x(e){return t("button",Object.assign({className:`${j.button} ${e.className}`},e,{style:Object.assign(Object.assign({},e.style),{background:e.bgColor,color:e.color})},{children:e.children}))}u(".button-module_button__iK0YS{border:1px solid rgba(255,0,0,0);border-radius:2px;box-sizing:border-box;cursor:pointer;height:40px}.button-module_button__iK0YS:active{opacity:.7}");const C=l.createContext({forms:{},registerForm:(e,t)=>{},uninstallForm:e=>{},updateForm:(e,t)=>{}});function k(e,t,l,n){return new(l||(l=Promise))((function(o,i){function r(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(r,s)}a((n=n.apply(e,t||[])).next())}))}const w={phone:(e,t)=>/^\+?[1-9]\d{1,14}$/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"Invalid phone number!"),email:(e,t)=>/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"Invalid email"),minLength:(e,t)=>{if("string"!=typeof e)throw new Error("minLength only for string");const l=(null==t?void 0:t.value)||0;return e.length>=l?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||`Minimum length is ${l}`)},maxLength:(e,t)=>{if("string"!=typeof e)throw new Error("minLength only for string");const l=(null==t?void 0:t.value)||Number.MAX_SAFE_INTEGER;return e.length<=l?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||`Maximum length is ${l}`)},atLeastOneUpperCase:(e,t)=>/[A-Z]/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"At least one uppercase character"),noSpecialCharacters:(e,t)=>/^[a-zA-Z0-9\s]*$/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"No special characters are allowed")};class N{constructor(e){this.updateCount=0,this.name="",this.fields={},this.onValuesChange=void 0,e&&(this.name=e)}addField(e,t){this.fields[e]=t}filterValues(e){return Object.assign({},e)}reset(){Object.keys(this.fields).forEach((e=>{this.fields[e].value=void 0,this.fields[e].error=void 0}))}setValue(e,t){var l,n;this.updateCount++,this.validateField(e),this.fields[e].value=t,null===(n=null===(l=this.fields[e])||void 0===l?void 0:l.onChange)||void 0===n||n.call(l,t),this.onValuesChange&&this.onValuesChange(e,t,this.fields),Object.keys(this.fields).forEach((l=>{var n;this.fields[l].deps&&(null===(n=this.fields[l])||void 0===n?void 0:n.deps.indexOf(e))>=0&&this.fields[l].onChange(t)}))}validateField(e){let t=this.fields[e].rule;if(!t)return;const l=this.fields[e].value;t=Object.keys(t).map((e=>t[e].validator?t[e]:Object.assign({validator:w[e]},t[e])));const n=i=>k(this,void 0,void 0,(function*(){try{if(yield i(l,t[o]),o++,o>=t.length)return;n(t[o].validator)}catch(t){this.fields[e].error="string"==typeof t?t:null==t?void 0:t.message}}));let o=0;n(t[o].validator)}}let F;const I=new Uint8Array(16);function P(){if(!F&&(F="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!F))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return F(I)}const S=[];for(let e=0;e<256;++e)S.push((e+256).toString(16).slice(1));var E={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function L(e,t,l){if(E.randomUUID&&!t&&!e)return E.randomUUID();const n=(e=e||{}).random||(e.rng||P)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){l=l||0;for(let e=0;e<16;++e)t[l+e]=n[e];return t}return function(e,t=0){return(S[e[t+0]]+S[e[t+1]]+S[e[t+2]]+S[e[t+3]]+"-"+S[e[t+4]]+S[e[t+5]]+"-"+S[e[t+6]]+S[e[t+7]]+"-"+S[e[t+8]]+S[e[t+9]]+"-"+S[e[t+10]]+S[e[t+11]]+S[e[t+12]]+S[e[t+13]]+S[e[t+14]]+S[e[t+15]]).toLowerCase()}(n)}const U=()=>{const e="__E9U_FORM_PREFIX__"+L();return new N(e)};const z=e=>{var t;if(!e)return null;const l=null===(t=e.dataset)||void 0===t?void 0:t.name;return l||(e.parentElement?z(e.parentElement):void 0)};function $(e){const[l,n]=o({});return t(C.Provider,Object.assign({value:{forms:l,registerForm:(e,t)=>{n(Object.assign(Object.assign({},l),{[e]:t}))},uninstallForm:e=>{n(Object.assign(Object.assign({},l),{[e]:void 0}))},updateForm:(e,t)=>{l[e]=t,n(Object.assign({},l))}}},{children:t(V,Object.assign({},e))}))}function V(e){const{children:l,onFinish:o,form:i,onValuesChange:a}=e,{updateForm:d}=s(C),u=function(e){const{registerForm:t,uninstallForm:l}=s(C),o=n();return r((()=>{let n=null;return o.current||(n=e||U(),o.current=n,t(n.name,n)),()=>{l("")}}),[e]),{form:o.current}}(i),c=u.form;return c?(a&&(c.onValuesChange=a),t("div",{children:t("form",Object.assign({"data-name":null==c?void 0:c.name,id:null==c?void 0:c.name,onReset:e=>{null==c||c.reset(),d(null==c?void 0:c.name,c)},onSubmit:e=>{null==o||o(null==c?void 0:c.fields),e.preventDefault()}},{children:l}))})):null}$.Item=function(a){var d,u,c,m,p;const{children:f,name:h,rule:_,deps:b,filter:v,renderChilden:g,label:y}=a;if(!h)return g?g(a):t("div",Object.assign({},a,{children:f}));const{forms:O}=s(C),[j,x]=o(),k=n(),w=n();r((()=>{const e=z(w.current),t=O[e];t?(k.current=t,h&&(null==t||t.addField(h,{rule:_,value:null,deps:b,filter:v,onChange:x}),x(e))):console.warn("FormItem with 'name' attribute must placed in Form")}),[w.current]);const N=e=>{var t;if(k.current){k.current.setValue(h,(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)||e)}},F=i((()=>{var e,t;if(!h)return f;const n=k.current,o=l.cloneElement(f,{value:(null===(t=null===(e=null==n?void 0:n.fields)||void 0===e?void 0:e[h])||void 0===t?void 0:t.value)||"",onChange:N});return g?g(Object.assign(Object.assign({},a),{children:o})):o}),[k.current,null===(u=null===(d=k.current)||void 0===d?void 0:d.fields[h])||void 0===u?void 0:u.value,null===(m=null===(c=k.current)||void 0===c?void 0:c.fields[h])||void 0===m?void 0:m.error,j]);return e("div",Object.assign({},a,{ref:w},{children:[e("div",{children:[e("span",{children:[y,": "]}),F]}),t("div",Object.assign({style:{color:"red"}},{children:null===(p=k.current)||void 0===p?void 0:p.fields[h].error}))]}))},$.create=U;export{x as Button,v as Flex,g as FlexItem,$ as Form,x as Input,f as Modal,_ as Tab,O as Table,m as Upload};
//# sourceMappingURL=index.js.map

"use strict";var e=require("react/jsx-runtime"),t=require("react"),l=require("framer-motion"),n=require("react-dom");function o(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===l&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var s={upload:"upload-module_upload__sdJ3u",fileList:"upload-module_fileList__r72T1",fileItem:"upload-module_fileItem__-GDPm",deleteItem:"upload-module_deleteItem__S1XS3"};o(".upload-module_upload__sdJ3u{cursor:pointer;display:inline-block;position:relative}.upload-module_upload__sdJ3u input{opacity:0;position:absolute;width:200px}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1{margin:0;padding-left:0}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1 li{list-style:none}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1 .upload-module_fileItem__-GDPm{position:relative}.upload-module_upload__sdJ3u .upload-module_fileList__r72T1 .upload-module_fileItem__-GDPm .upload-module_deleteItem__S1XS3{position:absolute}");var i={modal:"modal-module_modal__6lMO2",mask:"modal-module_mask__4ikYm",modalContent:"modal-module_modalContent__h8nfh"};o(".modal-module_modal__6lMO2{bottom:0;left:0;position:fixed;right:0;top:0;width:100%;z-index:1000}.modal-module_modal__6lMO2 .modal-module_mask__4ikYm{background-color:rgba(92,93,93,.385);bottom:0;left:0;position:fixed;right:0;top:0;z-index:10000}.modal-module_modal__6lMO2 .modal-module_modalContent__h8nfh{background-color:#fff;left:0;margin:0 auto;min-height:200px;position:absolute;right:0;top:0;z-index:10001}");var r={tab:"tab-module_tab__OCzxZ",title:"tab-module_title__7nE0l",tabContent:"tab-module_tabContent__zUPX9"};o(".tab-module_tab__OCzxZ .tab-module_title__7nE0l li{cursor:pointer;list-style:none;padding:10px}.tab-module_tab__OCzxZ .tab-module_tabContent__zUPX9{color:inherit}");var a={flex:"flex-module_flex__cvL3B"};o(".flex-module_flex__cvL3B{display:flex;flex-wrap:wrap}");var d={table:"table-module_table__7msNC"};o(".table-module_table__7msNC{border-collapse:collapse;font-size:16px;text-align:center}.table-module_table__7msNC thead{background-color:#f7f7f7;height:40px;line-height:40px}.table-module_table__7msNC tbody{background-color:#fcfcfc}.table-module_table__7msNC tbody td{height:40px;line-height:40px;padding:0 12px}");var u={button:"button-module_button__iK0YS"};function c(t){return e.jsx("button",Object.assign({className:`${u.button} ${t.className}`},t,{style:Object.assign(Object.assign({},t.style),{background:t.bgColor,color:t.color})},{children:t.children}))}o(".button-module_button__iK0YS{border:1px solid rgba(255,0,0,0);border-radius:2px;box-sizing:border-box;cursor:pointer;height:40px}.button-module_button__iK0YS:active{opacity:.7}");const m=t.createContext({forms:{},registerForm:(e,t)=>{},uninstallForm:e=>{},updateForm:(e,t)=>{}});function p(e,t,l,n){return new(l||(l=Promise))((function(o,s){function i(e){try{a(n.next(e))}catch(e){s(e)}}function r(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,r)}a((n=n.apply(e,t||[])).next())}))}const f={phone:(e,t)=>/^\+?[1-9]\d{1,14}$/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"Invalid phone number!"),email:(e,t)=>/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"Invalid email"),minLength:(e,t)=>{if("string"!=typeof e)throw new Error("minLength only for string");const l=(null==t?void 0:t.value)||0;return e.length>=l?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||`Minimum length is ${l}`)},maxLength:(e,t)=>{if("string"!=typeof e)throw new Error("minLength only for string");const l=(null==t?void 0:t.value)||Number.MAX_SAFE_INTEGER;return e.length<=l?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||`Maximum length is ${l}`)},atLeastOneUpperCase:(e,t)=>/[A-Z]/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"At least one uppercase character"),noSpecialCharacters:(e,t)=>/^[a-zA-Z0-9\s]*$/.test(e)?Promise.resolve("ok"):Promise.reject((null==t?void 0:t.message)||"No special characters are allowed")};class h{constructor(e){this.updateCount=0,this.name="",this.fields={},this.onValuesChange=void 0,e&&(this.name=e)}addField(e,t){this.fields[e]=t}filterValues(e){return Object.assign({},e)}reset(){Object.keys(this.fields).forEach((e=>{this.fields[e].value=void 0,this.fields[e].error=void 0}))}setValue(e,t){var l,n;this.updateCount++,this.validateField(e),this.fields[e].value=t,null===(n=null===(l=this.fields[e])||void 0===l?void 0:l.onChange)||void 0===n||n.call(l,t),this.onValuesChange&&this.onValuesChange(e,t,this.fields),Object.keys(this.fields).forEach((l=>{var n;this.fields[l].deps&&(null===(n=this.fields[l])||void 0===n?void 0:n.deps.indexOf(e))>=0&&this.fields[l].onChange(t)}))}validateField(e){let t=this.fields[e].rule;if(!t)return;const l=this.fields[e].value;t=Object.keys(t).map((e=>t[e].validator?t[e]:Object.assign({validator:f[e]},t[e])));const n=s=>p(this,void 0,void 0,(function*(){try{if(yield s(l,t[o]),o++,o>=t.length)return;n(t[o].validator)}catch(t){this.fields[e].error="string"==typeof t?t:null==t?void 0:t.message}}));let o=0;n(t[o].validator)}}let _;const b=new Uint8Array(16);function v(){if(!_&&(_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(b)}const g=[];for(let e=0;e<256;++e)g.push((e+256).toString(16).slice(1));var x={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function j(e,t,l){if(x.randomUUID&&!t&&!e)return x.randomUUID();const n=(e=e||{}).random||(e.rng||v)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){l=l||0;for(let e=0;e<16;++e)t[l+e]=n[e];return t}return function(e,t=0){return(g[e[t+0]]+g[e[t+1]]+g[e[t+2]]+g[e[t+3]]+"-"+g[e[t+4]]+g[e[t+5]]+"-"+g[e[t+6]]+g[e[t+7]]+"-"+g[e[t+8]]+g[e[t+9]]+"-"+g[e[t+10]]+g[e[t+11]]+g[e[t+12]]+g[e[t+13]]+g[e[t+14]]+g[e[t+15]]).toLowerCase()}(n)}const y=()=>{const e="__E9U_FORM_PREFIX__"+j();return new h(e)};const O=e=>{var t;if(!e)return null;const l=null===(t=e.dataset)||void 0===t?void 0:t.name;return l||(e.parentElement?O(e.parentElement):void 0)};function C(l){const[n,o]=t.useState({});return e.jsx(m.Provider,Object.assign({value:{forms:n,registerForm:(e,t)=>{o(Object.assign(Object.assign({},n),{[e]:t}))},uninstallForm:e=>{o(Object.assign(Object.assign({},n),{[e]:void 0}))},updateForm:(e,t)=>{n[e]=t,o(Object.assign({},n))}}},{children:e.jsx(k,Object.assign({},l))}))}function k(l){const{children:n,onFinish:o,form:s,onValuesChange:i}=l,{updateForm:r}=t.useContext(m),a=function(e){const{registerForm:l,uninstallForm:n}=t.useContext(m),o=t.useRef();return t.useEffect((()=>{let t=null;return o.current||(t=e||y(),o.current=t,l(t.name,t)),()=>{n("")}}),[e]),{form:o.current}}(s),d=a.form;return d?(i&&(d.onValuesChange=i),e.jsx("div",{children:e.jsx("form",Object.assign({"data-name":null==d?void 0:d.name,id:null==d?void 0:d.name,onReset:e=>{null==d||d.reset(),r(null==d?void 0:d.name,d)},onSubmit:e=>{null==o||o(null==d?void 0:d.fields),e.preventDefault()}},{children:n}))})):null}C.Item=function(l){var n,o,s,i,r;const{children:a,name:d,rule:u,deps:c,filter:p,renderChilden:f,label:h}=l;if(!d)return f?f(l):e.jsx("div",Object.assign({},l,{children:a}));const{forms:_}=t.useContext(m),[b,v]=t.useState(),g=t.useRef(),x=t.useRef();t.useEffect((()=>{const e=O(x.current),t=_[e];t?(g.current=t,d&&(null==t||t.addField(d,{rule:u,value:null,deps:c,filter:p,onChange:v}),v(e))):console.warn("FormItem with 'name' attribute must placed in Form")}),[x.current]);const j=e=>{var t;if(g.current){g.current.setValue(d,(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)||e)}},y=t.useMemo((()=>{var e,n;if(!d)return a;const o=g.current,s=t.cloneElement(a,{value:(null===(n=null===(e=null==o?void 0:o.fields)||void 0===e?void 0:e[d])||void 0===n?void 0:n.value)||"",onChange:j});return f?f(Object.assign(Object.assign({},l),{children:s})):s}),[g.current,null===(o=null===(n=g.current)||void 0===n?void 0:n.fields[d])||void 0===o?void 0:o.value,null===(i=null===(s=g.current)||void 0===s?void 0:s.fields[d])||void 0===i?void 0:i.error,b]);return e.jsxs("div",Object.assign({},l,{ref:x},{children:[e.jsxs("div",{children:[e.jsxs("span",{children:[h,": "]}),y]}),e.jsx("div",Object.assign({style:{color:"red"}},{children:null===(r=g.current)||void 0===r?void 0:r.fields[d].error}))]}))},C.create=y,exports.Button=c,exports.Flex=function(t){const{children:l,style:n,className:o,alignItems:s,justify:i}=t;return e.jsx("div",Object.assign({},t,{style:Object.assign({alignItems:s,justifyContent:i},n),className:`${a.flex} ${o}`},{children:l}))},exports.FlexItem=function({children:t,className:l,style:n,flex:o}){return e.jsx("div",Object.assign({className:l,style:Object.assign(Object.assign({flex:`0 0 ${o}`},n),{boxSizing:"border-box"})},{children:t}))},exports.Form=C,exports.Input=c,exports.Modal=function(t){const{width:n=800,children:o,dontDestroyOnClose:s=!1,visible:r,onClose:a,style:d={},motionConfig:u={initial:{opacity:.1,y:0,scale:.2},animate:{opacity:1,y:50,scale:1}}}=t,c={};if(s)c.display=r?"block":"none";else if(!r)return null;return e.jsxs("div",Object.assign({style:Object.assign({},c),className:i.modal},{children:[e.jsx("div",{onClick:()=>{null==a||a()},className:i.mask}),e.jsx(l.motion.div,Object.assign({},u,{style:Object.assign({width:`${n}px`},d),className:i.modalContent},{children:o}))]}))},exports.Tab=function(o){const{items:s,className:i,defaultActiveKey:a,motionConfig:d,extension:u,extSelector:c,tabContentVisible:m=!0,onTabChange:p,hiddenStyle:f={display:"none"}}=o,[h,_]=t.useState(0),[b,v]=t.useState(),g=t.useRef(null);return t.useEffect((()=>{var e;if(!g)return;if(!u)return;if(!c)throw new Error("'extSelector' not provide!");const t=null===(e=g.current)||void 0===e?void 0:e.querySelector(c);t&&v(t)}),[g.current]),e.jsxs("div",Object.assign({ref:g,className:`${r.tab} ${i}`},{children:[b?n.createPortal(u,b):null,e.jsx(l.motion.ul,Object.assign({"aria-label":"tab",className:r.title},{children:null==s?void 0:s.map(((t,n)=>e.jsx(l.motion.li,Object.assign({"aria-label":"tab-title",onClick:()=>{_(n),null==p||p(t)}},{children:t.title}),t.key)))})),m?e.jsx(l.motion.div,Object.assign({"aria-label":"tab-content"},d,{className:r.tabContent},{children:null==s?void 0:s[h].children})):null]}))},exports.Table=function(l){const{data:n,cols:o,className:s}=l,i=t.useMemo((()=>null==o?void 0:o.map((t=>e.jsx("td",{children:null==t?void 0:t.title},null==t?void 0:t.key)))),[o]);return e.jsxs("table",Object.assign({className:`${s} ${d.table}`},{children:[e.jsx("thead",{children:e.jsx("tr",{children:i})}),e.jsx("tbody",{children:null==n?void 0:n.map((t=>e.jsx("tr",{children:null==o?void 0:o.map((l=>l.render?e.jsx("td",{children:l.render(t)},l.key):e.jsx("td",{children:t[l.key]},l.key)))},t.id)))})]}))},exports.Upload=function(l){const{beforeUpload:n,children:o,uploadUrl:i,onComplete:r,customList:a,urlFilter:d,valueFilter:u}=l,c=t.useRef();let[m,p]=t.useState([]);const f=e=>{const t=[];for(let l=0;l<e.length;l++)t.push(new Promise(((t,n)=>{const o=new XMLHttpRequest,s=new FormData;s.append("file",e[l]),o.open("POST",i),o.send(s),o.onerror=e=>{n(e)},o.onload=()=>{let n;try{n=JSON.parse(o.response)}catch(e){n=o.response}const s={lastModified:(i=e[l]).lastModified,name:i.name,size:i.size,type:i.type,originFileObj:i};var i;const r=Object.assign({response:n},s);t(r)}})));Promise.all(t).then((e=>{m=m.concat(e),p([...m]),null==r||r(m)}))},h=t.useMemo((()=>a?a(m):m.map(((t,l)=>(console.log("Abc",t),e.jsxs("li",Object.assign({className:s.fileItem},{children:[t.type,e.jsx("img",{src:d(t.response),style:{width:"100px"}}),e.jsx("span",Object.assign({onClick:()=>{null==m||m.splice(l,1),p([...m])},className:s.deleteItem},{children:"delete"}))]})))))),[m]);return e.jsxs("span",Object.assign({className:s.upload},{children:[e.jsx("input",{multiple:!0,onChange:e=>{var t;e.target.files&&(t=e.target.files,n?null==n||n(t).then((e=>{f(t)})).catch((e=>{console.log(e)})):f(t))},ref:c,type:"file"}),e.jsxs("ul",Object.assign({className:s.fileList},{children:[e.jsx("li",{children:e.jsx("span",Object.assign({onClick:()=>{c.current.click()}},{children:o}))}),h]}))]}))};
//# sourceMappingURL=index.js.map
